<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Falling Typing Game</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap" rel="stylesheet">
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family: 'Baloo 2', cursive; }
  body { background: #fef7f0; color:#333; scroll-behavior: smooth; }

  header {
    position: fixed; top:0; left:0; width:100%; background:#ff9cb5;
    padding:15px 30px; display:flex; justify-content:space-between; align-items:center;
    z-index:1000; box-shadow:0 4px 6px rgba(0,0,0,0.1);
  }
  header h1 { color:white; font-size:1.8rem; }
  nav a { color:white; margin-left:20px; text-decoration:none; font-weight:bold; transition:0.3s; }
  nav a:hover { color:#fff0e5; }

  h1.page-title { text-align:center; margin-top:100px; color:#FF9CB5; font-size:2.5rem; }

  #gameArea {
    position:relative; width:100%; height:70vh; background:#fff; overflow:hidden;
    border-top:3px solid #FF9CB5; border-bottom:3px solid #FF9CB5; margin:50px auto 0; border-radius:15px;
  }
  .fallingItem {
    position:absolute;
    max-width:100px; /* max width of the image */
    height:100px; /* fixed height */
    width:auto; /* keep aspect ratio */
    border-radius:10px;
    object-fit:contain; /* prevent cropping */
    border:2px solid #FF9CB5;
    background:#fff;
  }

  #controls { text-align:center; margin-top:20px; }
  #typedInput {
    width:300px; padding:12px; font-size:18px;
    border:2px solid #FF9CB5; border-radius:5px; outline:none;
  }

  #stats { text-align:center; margin-top:15px; font-size:20px; color:#FF9CB5; font-weight:bold; }

  #gameOver {
    display:none; position:absolute; top:30%; width:100%; text-align:center; color:#FF9CB5;
    font-size:38px; font-weight:bold;
  }
  #restartBtn {
    margin-top:20px; padding:12px 25px; background:#FF9CB5; color:#fff; border:none; border-radius:10px;
    cursor:pointer; font-size:20px;
  }

  .fade-in { opacity:0; transform: translateY(30px); transition: transform 0.5s ease, opacity 0.5s ease; }
  .fade-in.visible { opacity:1; transform: translateY(0); }

</style>
</head>
<body>

<header>
  <h1>Hyeonzz</h1>
  <nav>
    <a href="#home">Home</a>
    <a href="index.html#about">About & Contact</a>
    <a href="index.html#portfolio">Games</a>
    <a href="index.html#howtoplay">How to Play</a>
  </nav>
</header>

<h1 class="page-title fade-in">Falling Typing Game</h1>

<section class="fade-in">
  <div id="gameArea">
    <div id="gameOver">
      GAME OVER<br>
      <button id="restartBtn">Restart</button>
    </div>
  </div>

  <div id="controls">
    <input id="typedInput" type="text" placeholder="Type the name here..." autofocus>
  </div>

  <div id="stats">
    Level: <span id="levelNum">1</span> â€” Score: <span id="score">0</span> â€” Lives: <span id="lives">3</span>
  </div>
</section>

<script>
const items = [
  {img:"1.png", name:"Seoyeon"},{img:"2.png", name:"Hyerin"},{img:"3.png", name:"Jiwoo"},
  {img:"4.png", name:"Chaeyeon"},{img:"5.png", name:"Yooyeon"},{img:"6.png", name:"Soomin"},
  {img:"7.png", name:"Nakyoung"},{img:"8.png", name:"Yubin"},{img:"9.png", name:"Kaede"},
  {img:"10.png", name:"Dahyun"},{img:"11.png", name:"Kotone"},{img:"12.png", name:"Yeonji"},
  {img:"13.png", name:"Nien"},{img:"14.png", name:"Sohyun"},{img:"15.png", name:"Xinyu"},
  {img:"16.png", name:"Mayu"},{img:"17.png", name:"Lynn"},{img:"18.png", name:"Joobin"},
  {img:"19.png", name:"Hayeon"},{img:"20.png", name:"Shion"},{img:"21.png", name:"Chaewon"},
  {img:"22.png", name:"Sullin"},{img:"23.png", name:"Seoah"},{img:"24.png", name:"Jiyeon"}
];

let active=null, fallTimer=null, speed=1.7, score=0, lives=3, level=1, levelCount=0;
const levelImages = [8,10,24]; // images per level
const gameArea=document.getElementById("gameArea");
const input=document.getElementById("typedInput");
const scoreEl=document.getElementById("score");
const livesEl=document.getElementById("lives");
const levelEl=document.getElementById("levelNum");
const gameOverScreen=document.getElementById("gameOver");

function updateUI() {
    scoreEl.textContent=score;
    livesEl.textContent=lives;
    levelEl.textContent=level;
}

function startGame() {
    gameOverScreen.style.display="none";
    score = 0;
    lives = 5;
    speed = 1.7;
    level = 1;
    levelCount = 0;
    input.value = ""; 
    input.focus();
    updateUI();
    spawnItem();
}

function spawnItem() {
    if(active) active.remove();
    const random=items[Math.floor(Math.random()*items.length)];
    active=document.createElement("img");
    active.src=random.img;
    active.dataset.answer=random.name.toLowerCase();
    active.className="fallingItem";
    active.style.left=Math.random()*(window.innerWidth-120)+"px";
    active.style.top="0px";
    gameArea.appendChild(active);
    fallDown();
}

function fallDown() {
    fallTimer=setInterval(()=>{
        let y=parseFloat(active.style.top);
        active.style.top=(y+speed)+"px";
        if(y>gameArea.offsetHeight-100){ // adjust to container
            clearInterval(fallTimer);
            lives--; updateUI();
            if(lives<=0){ endGame(); }
            else{ nextLevelOrSpawn(); }
        }
    },20);
}

input.addEventListener("input", ()=>{
    if(!active) return;
    let answer=active.dataset.answer;
    if(input.value.trim().toLowerCase()===answer){
        clearInterval(fallTimer);
        active.remove();
        score++;
        levelCount++;
        speed += 0.25; 
        input.value=""; 
        updateUI();
        nextLevelOrSpawn();
    }
});

function nextLevelOrSpawn(){
    if(levelCount>=levelImages[level-1]){
        levelCount=0;
        level++;
        speed += 0.5;
        if(level>3){
            alert("ðŸŽ‰ You finished all levels! Score: "+score);
            endGame();
            return;
        }
    }
    spawnItem();
}

function endGame(){
    clearInterval(fallTimer);
    if(active) active.remove();
    input.value = "";
    gameOverScreen.style.display="block";
}

document.getElementById("restartBtn").addEventListener("click", startGame);

startGame();

// Fade-in animation
const faders=document.querySelectorAll('.fade-in');
const appearOptions={ threshold:0.2 };
const appearOnScroll=new IntersectionObserver(function(entries, observer){
  entries.forEach(entry=>{
    if(entry.isIntersecting){
      entry.target.classList.add('visible');
      observer.unobserve(entry.target);
    }
  });
}, appearOptions);
faders.forEach(fader=>appearOnScroll.observe(fader));

</script>

</body>
</html>
